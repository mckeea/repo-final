name: Release

on:
  push:
    branches:
      - main
      - test
      - develop

jobs:
  release:
    runs-on: ubuntu-latest
    container:
      image: node:23
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Setup release environment
        run: |
          npm install --no-save semantic-release \
            @semantic-release/git \
            @semantic-release/changelog \
            @semantic-release/exec \
            @semantic-release/github
          export GH_TOKEN="${{ secrets.GH_RELEASE_TOKEN }}"
      - name: Run Semantic Release
        run: npx semantic-release
